<link rel='import' href='../../bower_components/polymer/polymer.html'>
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel='import' href='../components/ha-card.html'>

<link rel='import' href='../controls/ha-energy-reduction-base.html'>

<dom-module id='ha-energy_efficiency-card'>
  <template>
    <style is="custom-style" include="iron-flex"></style>
    <ha-card class="energy-efficiency" style$="[[getUseOutlookStyle(stateObj)]]">
      <ha-energy-reduction-base
        card_name="[[stateObj.attributes.friendly_name]]"
        compensation_or_savings="compensation"
        background_color="[[getUseOutlookStyle(stateObj)]]"
        update_method="update_energy_efficiency"
        update_platform="energy_efficiency"
        other_method="update_time_of_use"
        other_platform="time_of_use"
        state_obj="[[stateObj]]"
        hass="[[hass]]"
      >
      </ha-energy-reduction-base>
  </template>
</dom-module>

<script>
Polymer({
  is: 'ha-energy_efficiency-card',
  properties: {
    hass: {
      type: Object,
    },
    stateObj: {
      type: Object,
    },
    groupEntity: {
      type: Object,
    }
  },
  getUseOutlookStyle: function (stateObj) {
      let useOutlookStyle = "";

      if (stateObj)
      {
          const useOutlook = stateObj.attributes.useAlgorithm.value;
          useOutlookStyle = (!useOutlook ? "background-color: lightgray" : '');
      }
      
      return useOutlookStyle;
  }
});
</script>
